(function(){var g,h,d,e,k,f;d=function(){Array.prototype.unshift.call(arguments,"topicsview:");return console.log.apply(console,arguments)};this.READY=!1;f=function(a,b,c){return topicInputBean.newTopic(a,b,c)};k=function(a){return postInputBean.newPost(a,"post")};this.spin=function(a){a?this.spin.count+=1:--this.spin.count;return $("#spin").spin(0<this.spin.count?"large":!1)};this.spin.count=0;this.addTopic=function(a){var b,c;if(READY)return"review"===a.type?null!=(b=this.reviewView)?b.addTopic(a):
void 0:null!=(c=this.topicView)?c.addTopic(a):void 0};this.updateTopic=function(a){var b,c;if(READY)return"review"===a.type?null!=(b=this.reviewView)?b.updateTopic(a):void 0:null!=(c=this.topicView)?c.updateTopic(a):void 0};this.addPost=function(a){var b;if(READY)return null!=(b=this.postView)?b.addPost(a):void 0};this.updatePost=function(a){var b;if(READY)return null!=(b=this.postView)?b.updatePost(a):void 0};h=function(){var a,b;a=$(".sec-reviews");b={type:"review"};SUBJECT_ID&&(b.subjectId=SUBJECT_ID,
b.subjectType="game");this.reviewView=new topicsjs.TopicList({container:a.find("> .sec-content > .forum-topics"),more:a.find("> .sec-content > .footer > .btn-more"),search:b,complete:!TOPIC_ID});a=$(".sec-topics");b={notype:"review"};SUBJECT_ID&&(b.subjectId=SUBJECT_ID);this.topicView=new topicsjs.TopicList({container:a.find("> .sec-content > .forum-topics"),more:a.find("> .sec-content > .footer > .btn-more"),search:b,complete:!TOPIC_ID});this.reviewView.show();this.topicView.show();a=$(".sec-posts");
if(TOPIC_ID)return this.postView=new postsjs.PostList({container:a.find("> .sec-content > .forum-posts"),more:a.find("> .sec-content > .footer > .btn-more"),topicId:TOPIC_ID}),this.postView.show()};g=function(){var a;$(".sec-btn").click(function(){var b,a;a=$(this);b=a.parent(".sec");b.length&&(b=b.find(".sec-content"),b.is(":empty")&&a.hasClass("checked")||(a.toggleClass("checked"),b.is(":empty")||b.toggle("fade")));return!1});a=$(".sec.sec-topics");a.find(".new-topic").click(function(){var a,c;
SUBJECT_ID?(a=SUBJECT_ID,c="game"):(a=101,c="subject");f("chat",a,c);return!1});a=$(".sec.sec-reviews");a.find(".new-topic").click(function(){var a,c;SUBJECT_ID?(a=SUBJECT_ID,c="game"):(a=101,c="subject");f("review",a,c);return!1});a=$(".sec.sec-posts");return a.find(".new-post").click(function(){k(TOPIC_ID);return!1})};e=function(){if(null==this.i18nBean)return d("init: wait"),setTimeout(e,100);d("init: enter");moment.locale(LOCALE);topicsjs.init();postsjs.init();h();g();this.READY=!0;return d("init: leave")};
$(function(){return e()})}).call(this);

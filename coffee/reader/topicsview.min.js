(function(){var f,g,d,e,h,k;d=function(){Array.prototype.unshift.call(arguments,"topicsview:");return console.log.apply(console,arguments)};this.READY=!1;k=function(a){return topicInputBean.newTopic(a)};h=function(a){return postInputBean.newPost(a)};this.spin=function(a){a?this.spin.count+=1:--this.spin.count;return $("#spin").spin(0<this.spin.count?"large":!1)};this.spin.count=0;this.addTopic=function(a){var b,c;if(READY)return"review"===a.type?null!=(b=this.reviewView)?b.addTopic(a):void 0:null!=
(c=this.topicView)?c.addTopic(a):void 0};this.updateTopic=function(a){var b,c;if(READY)return"review"===a.type?null!=(b=this.reviewView)?b.updateTopic(a):void 0:null!=(c=this.topicView)?c.updateTopic(a):void 0};this.addPost=function(a){var b;if(READY)return null!=(b=this.chatView)?b.addPost(a):void 0};this.updatePost=function(a){var b;if(READY)return null!=(b=this.chatView)?b.updatePost(a):void 0};g=function(){var a,b,c;a=$(".sec-reviews");b={type:"review"};if(c=a.data("subject-id"))b.subjectId=c,
b.subjectType="game";this.reviewView=new topicsjs.TopicList({container:a.find("> .sec-content > .forum-topics"),more:a.find("> .sec-content > .footer"),search:b});a=$(".sec-topics");b={notype:"review"};if(c=a.data("subject-id"))b.subjectId=c,b.subjectType=a.data("subject-type");this.topicView=new topicsjs.TopicList({container:a.find("> .sec-content > .forum-topics"),more:a.find("> .sec-content > .footer"),search:b});a=$(".sec-chat");if(b=a.data("topic-id"))return this.chatView=new postsjs.PostList({container:a.find("> .sec-content > .forum-posts"),
more:a.find("> .sec-content > .footer"),topicId:b})};f=function(){var a;$(".sec-btn").click(function(){var a,c;c=$(this);a=c.parent(".sec");a.length&&(a=a.find(".sec-content"),a.is(":empty")&&c.hasClass("checked")||(c.toggleClass("checked"),a.is(":empty")||a.toggle("fade")));return!1});a=$(".sec.sec-topic");a.find(".new-topic").click(function(){var a;a=$(this).parent().data("subject-id");k(a);return!1});a=$(".sec.sec-chat");return a.find(".new-chat").click(function(){var a;a=$(this).parent().data("topic-id");
h(a);return!1})};e=function(){if(null==this.i18nBean)return d("init: wait"),setTimeout(e,100);d("init: enter");moment.locale(LOCALE);topicsjs.init();postsjs.init();g();f();this.READY=!0;return d("init: leave")};$(function(){return e()})}).call(this);

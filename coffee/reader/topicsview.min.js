(function(){var d,e,b,c,f,g;b=function(){Array.prototype.unshift.call(arguments,"topicsview:");return console.log.apply(console,arguments)};this.READY=!1;g=function(a){return topicInputBean.newTopic(a)};f=function(a){return postInputBean.newPost(a)};this.spin=function(a){a?this.spin.count+=1:--this.spin.count;return $("#spin").spin(0<this.spin.count?"large":!1)};this.spin.count=0;this.addTopic=function(a){if(READY)return this.topicView.addTopic(a)};this.updateTopic=function(a){if(READY)return this.topicView.updateTopic(a)};
this.addPost=function(a){if(READY)return this.chatView.addPost(a)};this.updatePost=function(a){if(READY)return this.chatView.updatePost(a)};e=function(){topicsjs.init();this.topicView=new topicsjs.TopicList({container:$(".sec-topics > .sec-content > .forum-topics"),more:$(".sec-topics > .sec-content > .footer"),subjectId:$(".sec-topics").data("subject-id")});postsjs.init();return this.chatView=new postsjs.PostList({container:$(".sec-chat > .sec-content > .forum-posts"),more:$(".sec-chat > .sec-content > .footer"),
topicId:$(".sec-chat").data("topic-id")})};d=function(){var a;$(".sec-btn").click(function(){var a,b;b=$(this);a=b.parent(".sec");a.length&&(a=a.find(".sec-content"),a.is(":empty")&&b.hasClass("checked")||(b.toggleClass("checked"),a.is(":empty")||a.toggle("fade")));return!1});a=$(".sec.sec-topic");a.find(".new-topic").click(function(){var a;a=$(this).parent().data("subject-id");g(a);return!1});a=$(".sec.sec-chat");return a.find(".new-chat").click(function(){var a;a=$(this).parent().data("topic-id");
f(a);return!1})};c=function(){if(null==this.i18nBean)return b("init: wait"),setTimeout(c,100);b("init: enter");moment.locale("ja");e();d();this.READY=!0;return b("init: leave")};$(function(){return c()})}).call(this);

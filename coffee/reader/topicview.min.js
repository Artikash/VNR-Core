(function(){var f,g,d,e,h;d=function(){Array.prototype.unshift.call(arguments,"topicsview:");return console.log.apply(console,arguments)};this.READY=!1;h=function(a){return postInputBean.newPost(a)};this.spin=function(a){a?this.spin.count+=1:--this.spin.count;return $("#spin").spin(0<this.spin.count?"large":!1)};this.spin.count=0;this.addTopic=function(a){var b,c;if(READY)return"review"===a.type?null!=(b=this.reviewView)?b.addTopic(a):void 0:null!=(c=this.topicView)?c.addTopic(a):void 0};this.updateTopic=
function(a){var b,c;if(READY)return"review"===a.type?null!=(b=this.reviewView)?b.updateTopic(a):void 0:null!=(c=this.topicView)?c.updateTopic(a):void 0};this.addPost=function(a){var b;if(READY)return null!=(b=this.postView)?b.addPost(a):void 0};this.updatePost=function(a){var b;if(READY)return null!=(b=this.postView)?b.updatePost(a):void 0};g=function(){var a;a=$(".sec-posts");return this.postView=new postsjs.PostList({container:a.children(".forum-posts"),more:a.find("> .footer > .btn-more"),topicId:TOPIC_ID})};
f=function(){return $(".sec.sec-posts").find(".new-post").click(function(){h(TOPIC_ID);return!1})};e=function(){if(null==this.i18nBean)return d("init: wait"),setTimeout(e,100);d("init: enter");moment.locale(LOCALE);topicjs.init();postsjs.init();g();f();this.READY=!0;return d("init: leave")};$(function(){return e()})}).call(this);

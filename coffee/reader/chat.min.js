(function(){var h,e,b,f,k,g,l,m,n,p,q,d;b=function(){return console.log.apply(console,arguments)};e=function(a){return a};k=function(a,c){null==c&&(c=128);return a?c?e("http://media.getchute.com/media/"+a+"/"+c+"x"+c):e("http://media.getchute.com/media/"+a):""};m=function(a){return null==a?"":bbcode.parse(linkify(_.escape(a.replace(/]\n/g,"]")))).replace(/<li><\/li>/g,"<li>")};f=function(a,c){var b;try{if("number"===(b=typeof a)||"string"===b)a*=1E3;return a?moment(a).format(c):""}catch(d){return""}};
h=Haml('.post\n  .left\n    :if userAvatar\n      %img.img-circle.avatar(src="#{userAvatar}")\n  .right\n    .head\n      .user(style="#{userStyle}") #{userName}\n      .time.text-minor = createTime\n      .lang = lang\n      .time.text-success = updateTime\n    .content = content\n%hr');n=function(a){return h({userName:a.userName,userStyle:a.userColor?"color:"+a.userColor:"",lang:a.lang,userAvatar:k(a.userAvatar,50),content:m(a.content),createTime:f(a.createTime,"H:mm M/D/YY ddd"),updateTime:a.updateTime>
a.createTime?f(a.updateTime,"H:mm M/D/YY ddd"):""})};p=function(a){return a.map(n).join("")};q=function(a){a=p(a);return $(".topic > .posts").html(a)};l=function(){d(!0);return rest.forum.list("post",{data:{topic:TOPIC_ID,limit:20},error:function(){return d(!1)},success:function(a){d(!1);if(a.length)return q(a)}})};d=function(a){return $("#spin").spin(a?"large":!1)};g=function(){if(null==this.cacheBean)return b("init: wait"),setTimeout(g,100);b("init: enter");moment.locale("ja");this.TOPIC_ID=$(".topic").data("id");
l();b("init: leave");return $.growl("Hello World",{type:"danger"})};$(function(){return g()})}).call(this);

(function(){define(["main/ajax","main/defs","main/growl","main/tr"],function(k,l,f,h){return{list:function(b,c){var g,d,e;g=c.data;e=c.success;d=c.error;return k.postJSON({url:"/json/"+b+"/list",data:g,success:function(a){if(0===a.status&&a.data)a=a.data,console.log(b,"list: count =",a.length),"function"===typeof e&&e(a);else return f.showInternetError(h(b)),"function"===typeof d?d():void 0},error:function(a){console.warn(b,"error:",JSON.stringify(a));f.showInternetError(h(b));return"function"===
typeof d?d():void 0}})},query:function(b,c){var g,d,e;g=c.data;e=c.success;d=c.error;return k.postJSON({url:"/json/"+b+"/query",data:g,success:function(a){var c;if(0===a.status&&null!=(c=a.data)&&c.id)a=a.data,console.log(b,"query: id =",a.id),"function"===typeof e&&e(a);else return f.showInternetError(h(b)),"function"===typeof d?d():void 0},error:function(a){console.warn(b,"error:",JSON.stringify(a));f.showInternetError(h(b));return"function"===typeof d?d():void 0}})},create:function(b,c){var g,
d,e;g=c.data;e=c.success;d=c.error;return k.postJSON({url:"/json/"+b+"/create",data:g,success:function(a){var c;if(0===a.status&&null!=(c=a.data)&&c.id)a=a.data,console.log(b,"create: id =",a.id),"function"===typeof e&&e(a);else{switch(a.status){case l.STATUS_USER_ERR:f.showSignInError();break;case l.STATUS_DUP_ERR:f.showDupError(h(b));break;default:f.showInternetError(h(b))}return"function"===typeof d?d():void 0}},error:function(a){console.warn(b,"error:",JSON.stringify(a));f.showInternetError(h(b));
return"function"===typeof d?d():void 0}})},update:function(b,c){var g,d,e;g=c.data;e=c.success;d=c.error;return k.postJSON({url:"/json/"+b+"/update",data:g,success:function(a){var c;if(0===a.status&&null!=(c=a.data)&&c.id)a=a.data,console.log(b,"update: id =",a.id),"function"===typeof e&&e(a);else return a.status===l.STATUS_USER_ERR?f.showSignInError():f.showInternetError(h(b)),"function"===typeof d?d():void 0},error:function(a){console.warn(b,"error:",JSON.stringify(a));f.showInternetError(h(b));
return"function"===typeof d?d():void 0}})}}})}).call(this);

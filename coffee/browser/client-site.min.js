(function(){var k,d,e,b=function(a,f){return function(){return a.apply(f,arguments)}};k=function(){function a(){this._translate=b(this._translate,this);this._renderTr=b(this._renderTr,this);this._renderText=b(this._renderText,this);this.addTr=b(this.addTr,this);this.addText=b(this.addText,this);this.hide=b(this.hide,this);this.show=b(this.show,this);this.pageBreak=b(this.pageBreak,this);var f,a;f=Haml.render('#sk-main\n  .header(title="Draggable")\n    .button.close(title="Close") &times;\n  .body\n    .content');
this.$el=$(f).hide().appendTo(document.body);a=this.$el.children(".header");f=this.$el.children(".body");this.$el.draggable({handle:a});this.$text=f.children(".content");this.hamlText=Haml(".text #{text}");this.hamlTr=Haml('.tr(data-key="#{key}" title="#{key}") #{text}')}a.prototype.id="sk-text";a.prototype.pageBreak=function(){return this.$el.is(":visible")?this.$text.empty():this.show()};a.prototype.show=function(){return this.$el.fadeIn()};a.prototype.hide=function(){return this.$el.fadeOut()};
a.prototype.addText=function(a){var c;this.pageBreak();c=this._renderText(a);$(c).hide().appendTo(this.$text).fadeIn();return this._translate(a)};a.prototype.addTr=function(a,c){var b;b=this._renderTr(a,c);return $(b).hide().appendTo(this.$text).fadeIn()};a.prototype._renderText=function(a){return this.hamlText({text:a})};a.prototype._renderTr=function(a,c){return this.hamlTr({text:a,key:c})};a.prototype._translate=function(a){var c,b,d,e,h,g;if(c=trBean.translators()){h=c.split(",");g=[];d=0;for(e=
h.length;d<e;d++)c=h[d],(b=trBean.translate(a,c))?g.push(this.addTr(b,c)):g.push(void 0);return g}};return a}();e=function(){var a,b;a=$("#game_frame").contents();if(a.length){a=a.find("#hasc_text");if(a.length)return b=new k,a.bind("DOMSubtreeModified",function(){var a;if(a=$.trim(this.textContent))return b.addText(a)});console.log("vnr: wait for text ready")}else console.log("vnr: wait for iframe ready");setTimeout(e,3E3)};d=function(){if(this.$&&this.$.ui&&this.Haml)return $(function(){if($("#game_frame").length)return e();
console.log("vnr: wait for iframe ready");return setTimeout(d,3E3)});console.log("vnr: wait for libraries ready");return setTimeout(d,3E3)};d()}).call(this);
null

(function(){var d,l,c,m,e,n,b=function(a,f){return function(){return a.apply(f,arguments)}};l=function(){function a(){this._translate=b(this._translate,this);this._renderTr=b(this._renderTr,this);this._renderText=b(this._renderText,this);this.addTr=b(this.addTr,this);this.addText=b(this.addText,this);this.pageBreak=b(this.pageBreak,this);this.hide=b(this.hide,this);this.show=b(this.show,this);this.isVisible=b(this.isVisible,this);var f,a;this.visible=!1;f=Haml.render('#sk-main\n  .header(title="Draggable")\n    .btn-close(title="Close") &times;\n  .body\n    .content');
this.$el=$(f).hide().appendTo(document.body);a=this.$el.children(".header");f=this.$el.children(".body");this.$el.draggable({handle:a});this.$text=f.children(".content");this.hamlText=Haml(".text #{text}");this.hamlTr=Haml('.tr(data-key="#{key}" title="#{key}") #{text}');a.find(".btn-close").click(function(){return n(!1)})}a.prototype.id="sk-text";a.prototype.isVisible=function(){return this.visible&&this.$el.is(":visible")};a.prototype.show=function(){if(!this.visible)return this.visible=!0,this.$el.fadeIn()};
a.prototype.hide=function(){if(this.visible)return this.visible=!1,this.$el.fadeOut()};a.prototype.pageBreak=function(){return this.visible?this.$text.empty():this.show()};a.prototype.addText=function(a){var g;this.pageBreak();g=this._renderText(a);$(g).hide().appendTo(this.$text).fadeIn();return this._translate(a)};a.prototype.addTr=function(a,g){var b;b=this._renderTr(a,g);return $(b).hide().appendTo(this.$text).fadeIn()};a.prototype._renderText=function(a){return this.hamlText({text:a})};a.prototype._renderTr=
function(a,b){return this.hamlTr({text:a,key:b})};a.prototype._translate=function(a){var b,d,c,e,k,h;if(b=trBean.translators()){k=b.split(",");h=[];c=0;for(e=k.length;c<e;c++)b=k[c],(d=trBean.translate(a,b))?h.push(this.addTr(d,b)):h.push(void 0);return h}};return a}();m=function(){return document.body.classList.contains("site-enabled")};n=function(a){var b;b=document.body;return a?b.classList.add("site-enabled"):b.classList.remove("site-enabled")};d=null;e=function(){var a;a=$("#game_frame").contents();
if(a.length){a=a.find("#hasc_text");if(a.length)return d=new l,a.bind("DOMSubtreeModified",function(){var a;m()&&(a=$.trim(this.textContent))&&(d.show(),d.addText(a));return!0});console.log("vnr: wait for text ready")}else console.log("vnr: wait for iframe ready");setTimeout(e,3E3)};c=function(){if(this.$&&this.$.ui&&this.Haml)return $(function(){if($("#game_frame").length)return e();console.log("vnr: wait for iframe ready");return setTimeout(c,3E3)});console.log("vnr: wait for libraries ready");
return setTimeout(c,3E3)};c()}).call(this);
null

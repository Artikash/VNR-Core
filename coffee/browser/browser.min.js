(function(){var k,m,n,q,r,s,t,u,v,w,l,x;k=" \n\r\t\f\x0B\u00a0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u2028\u2029\u202f\u205f\u3000".split("");l=function(a){return null!=a?a.toString():""};s=function(a,b){var e,g,c,d,f,h;null==b&&(b=k);a=l(a);h=0;f=a.length;g=b.length;for(c=!0;c&&h<f;)for(c=!1,d=-1,e=a.charAt(h);++d<g;)if(e===b[d]){c=!0;++h;break}return h>=f?"":a.substr(h,f)};w=function(a,b){var e,g,c,d,f;null==b&&(b=k);a=l(a);c=a.length-1;g=b.length;for(d=!0;d&&
0<=c;)for(d=!1,f=-1,e=a.charAt(c);++f<g;)if(e===b[f]){d=!0;--c;break}return 0<=c?a.substring(0,c+1):""};x=function(a,b){null==b&&(b=k);a=l(a);return s(w(a,b),b)};q=function(a){return/[0-9a-zA-Z\uff10-\uff19\uff41-\uff5a\uff21-\uff3a]/.test(a)};r=function(a){return/[0-9a-zA-Z\uff10-\uff19\uff41-\uff5a\uff21-\uff3a'"?!,\.]/.test(a)};u=function(a,b,e,g){var c,d;c=document.createElement("rb");c.textContent=a;d=document.createElement("rt");d.textContent=b;b=document.createElement("ruby");e&&(b.title=e);
b.className=g;b.appendChild(c);b.appendChild(d);b.ondblclick=function(){if(a&&ttsBean.isEnabled())return ttsBean.speak(a)};return b};t=function(a){var b,e,g,c,d,f,h,k,l,m,n,p;if(b=jlpBean.parse(a)){a=document.createDocumentFragment();p=JSON.parse(b);k=0;for(m=p.length;k<m;k++){f=p[k];b=document.createElement("span");b.className="inject-ruby";d="";e=g=!1;l=0;for(n=f.length;l<n;l++)h=f[l],c=h[0],(e=q(c[0]))&&g&&(d+=" ",g=document.createTextNode(" "),b.appendChild(g)),g=r(c.slice(-1)),d+=c,c=u.apply(this,
h),b.appendChild(c);d&&(b.onclick=function(a){return function(){if(ttsBean.isEnabled())return ttsBean.speak(a)}}(d));a.appendChild(b)}return a}};v=function(a){var b;return"#text"===a.nodeName?(b=document.createElement("span"),b.className="inject-src",b.textContent=a.textContent,b):a.cloneNode()};m=function(a,b){var e;a=a.firstChild;for(e=[];null!=a;)3===a.nodeType?b.push(a):1===a.nodeType&&m(a,b),e.push(a=a.nextSibling);return e};n=function(a){var b,e,g,c,d,f;b=[];m(a,b);f=[];c=0;for(d=b.length;c<
d;c++)a=b[c],(e=x(a.textContent))?(e=t(e))?(g=v(a),e.appendChild(g),f.push(a.parentNode.replaceChild(e,a))):f.push(void 0):f.push(void 0);return f};(function(){return null!=document.body?n(document.body):window.onload=function(){return n(document.body)}})()}).call(this);
